<% if fines.count == 0 %>

<%= erb :empty_state %>

<% elsif %>
  <p>You are charged <a href="https://lib.umich.edu/find-borrow-request/borrow-and-return/reminders-and-overdue-items">overdue fines</a> for high-use materials that are returned late. This includes material from the Askwith Media Library, course reserves, and other items that have been "recalled" or are lost or damaged.</p>

  <form action="/fines-and-fees/pay" method="post" class="owl">
    <div class="responsive-table">
      <table>
        <thead>
          <tr>
            <th>Title &amp; Author</th>
            <th>Type</th>
            <th>Fine</th>
          </tr>
        </thead>
        <tbody>
        <% fines.each_with_index do |fine,index| %>
          <tr>
            <td><%= fine.title %></td>
            <td>
              <span aria-hidden="true">Type:</span>
              <%= fine.type %>
            </td>
            <td>
              <span aria-hidden="true">Fine:</span>
              <span style="color: var(--color-pink-500);">$<%= fine.balance %></span>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>

    <p>Your total due is <strong>$<%=fines.total_sum_in_dollars%></strong></p>

    <h2>How much would you like to pay today?</h2>

    <div class="payment-amount-options radio-options owl">
      <div class="payment-amount-option radio-option">
        <input 
          type="radio"
          name="pay_in_full"
          class="visually-hidden"
          id="pay-all"
          value="true"
        >
        <label for="pay-all">
          <m-icon name="radio-button-checked"></m-icon>
          <m-icon name="radio-button-unchecked"></m-icon>
          <span>Pay full amount (<strong>$<%=fines.total_sum_in_dollars%></strong>)</span>
        </label>
      </div>
      <div class="payment-amount-option radio-option">
        <input 
          type="radio"
          name="pay_in_full"
          class="visually-hidden"
          id="pay-some"
          value="false" 
        >
        <label for="pay-some">
          <m-icon name="radio-button-checked"></m-icon>
          <m-icon name="radio-button-unchecked"></m-icon>
          <span>Pay partial amount</span>
        </label>
        <div id="pay-some-amount">
          <span>$</span>
          <input
            type="number"
            min="0.00"
            max="<%=fines.total_sum_in_dollars%>"
            step="0.01"
            pattern="^\d+\.\d{2}$"
            placeholder="0.00"
            value="0.00"
            name="partial_amount"
            for="pay-some"
            aria-label="Amount you wish to pay"
            aria-describedby="payment-description"
          >
          <div id="payment-description" class="input-description">
            <m-icon name="info"></m-icon><span>Payment amount must include cents. Example: 25.00</span>
          </div>
        </div>
      </div>
    </div>

    <button type="submit">Pay fines</button>

    <p><strong>Payments made are non-refundable</strong>.</p>
    
    <p>If you have a question about your account or would like to contest a fine, please contact us at the <a href="https://lib.umich.edu/locations-and-hours/hatcher-library/hatcher-north-information-services-desk">Hatcher North Information Services Desk</a> before making payments.</p>
  </form>
<% end %>
