<h1>Contact information</h1>

<div class="owl narrow-content">

  <p>You can update your name and address at <a href="https://wolverineaccess.umich.edu/task/all/campus-personal-info">Wolverine Access</a>.</p>

  <p>To change document delivery preferences, visit your <a href="https://ill.lib.umich.edu/illiad/ChangeSite/ChangeSite.asp">interlibrary loan account</a>.</p>

  <table class="patron-table">
    <tr>
      <th>Full name</th>
      <td><%= patron.full_name %></td>
    </tr>
    <tr>
      <th>Email</th>
      <td><%= patron.uniqname %>@umich.edu</td>
    </tr>
  </table>

  <form class="owl" method="post" action="/sms">
    <h2>Text Notifications</h2>

    <p>Add a phone number to receive text notifications on the status of your request and loans. Special collections requests are not included. Message and data rates may apply.</p>

    <input type="checkbox" class="toggle-switch visually-hidden" id="text-notifications" name="text-notifications" <% if patron.sms_number? %>checked<% end%>>
    <label class="toggle-switch-label" for="text-notifications">
      <div class="toggle"></div>
      <span>You wish to receive text notifications</span>
    </label>

    <div class="sms-number-container">
      <label class="text-notifications-label" for="sms-number">
        Phone number
      </label>
      <input
        type="tel"
        name="sms-number"
        id="sms-number"
        value="<%= patron.sms_number %>"
        pattern="\(\d{3}\) \d{3}-\d{4}"
        aria-describedby="sms-number-description"
        autocomplete="on"
      />
      <div id="sms-number-description">
        <m-icon name="info"></m-icon><span class="input-description">Phone number must be 10 digits. Example: (123) 456-7890.</span>
      </div>
    </div>

    <button>Update notification preferences</button>
  </form>

  <form class="owl" method="post" action="/settings/history">
    <h2>Checkout History</h2>

    <% if patron.retain_history == true %>

      <p>You have chosen to keep a record of your checkout history.</p>

      <p>If you would like us to delete your checkout history and stop adding items to it, please update your preferences.</p>

      <p>You can change this preference at any time.</p>

    <% elsif patron.retain_history == false %>

      <p>You have chosen not to keep a record of your checkout history.</p>

      <p>If you would like us to start adding items to your checkout history, please update your preferences.</p>

      <p>You can change this preference at any time.</p>

    <% elsif patron.checkout_history? %>

      <p>We've been preserving your checkout history since April 2016. If youâ€™d like to continue to keep a record of your checkout history, you can select that option now.</p>

      <p>If you prefer to have your checkout history deleted and no longer record future checkouts, you can opt-out.</p>

      <p>You can change this preference at any time.</p>

    <% else %>

      <p>You can choose to either keep a record of your checkout history, or opt out of having one.</p>
      
      <p>You can change this preference at any time.</p>

    <% end %>

    <div class="checkout-history-options owl">
      <div class="checkout-history-option">
        <input 
          type="radio" 
          name="checkout-history" 
          class="visually-hidden"
          id="opt-in" 
          value="true" 
          <% if patron.retain_history == true %>checked<% end%>
        >
        <label for="opt-in">
          <m-icon name="radio-button-checked"></m-icon>
          <m-icon name="radio-button-unchecked"></m-icon>
          <span>Yes, record my checkout history.</span>
        </label>
      </div>
      <div class="checkout-history-option">
        <input 
          type="radio" 
          name="checkout-history"
          class="visually-hidden" 
          id="opt-out" 
          value="false" 
          <% if patron.retain_history == false %>checked<% end%>
        >
        <label for="opt-out">
          <m-icon name="radio-button-checked"></m-icon>
          <m-icon name="radio-button-unchecked"></m-icon>
          <span>No, do not record my checkout history.</span>
        </label>
      </div>
    </div>
    
    <button>Update history preferences</button>
  </form>

</div>
